<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Firestore Test</title>
<style>
  body { font-family: Arial; padding: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 6px; text-align: left; cursor: pointer; }
  th { background-color: #eee; }
  button { margin-top: 10px; padding: 6px 12px; }
</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
<h2>ðŸ“Š Firestore Test</h2>

<h3>Adicionar item</h3>
<label>Nome: <input type="text" id="nome"></label><br>
<label>Valor: <input type="number" id="valor" step="0.01"></label><br>
<label>Ativo: <input type="checkbox" id="ativo"></label><br>
<button onclick="addItem()">Adicionar</button>

<table id="dataTable">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Valor</th>
      <th>Ativo</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
// ðŸ”¹ Config Firebase (substitua com suas credenciais)
const firebaseConfig = {
  apiKey: "AIzaSyDK3uJ5GUlDo8Syrws9iJybqloTW3dFPiU",
  authDomain: "web-app-5f4cf.firebaseapp.com",
  projectId: "web-app-5f4cf",
  storageBucket: "web-app-5f4cf.firebasestorage.app",
  messagingSenderId: "1033574429739",
  appId: "1:1033574429739:web:f879e1ff7554248936e66e",
  measurementId: "G-T6JWQZ407T"
};
firebase.initializeApp(firebaseConfig);
  // Initialize Firebase

// ðŸ”¹ FunÃ§Ã£o para adicionar item
function addItem() {
  const nome = document.getElementById('nome').value;
  const valor = parseFloat(document.getElementById('valor').value);
  const ativo = document.getElementById('ativo').checked;

  if (!nome || isNaN(valor)) { alert("Preencha nome e valor!"); return; }

  db.collection('items').add({ nome, valor, ativo, created: new Date() });
  document.getElementById('nome').value = '';
  document.getElementById('valor').value = '';
  document.getElementById('ativo').checked = false;
}

// ðŸ”¹ FunÃ§Ã£o para renderizar tabela
function renderTable(items) {
  const tbody = document.querySelector('#dataTable tbody');
  tbody.innerHTML = '';
  items.forEach(doc => {
    const data = doc.data();
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${data.nome}</td>
      <td>${data.valor.toFixed(2)}</td>
      <td>${data.ativo ? 'Sim' : 'NÃ£o'}</td>
    `;
    tr.onclick = () => {
      db.collection('items').doc(doc.id).update({ ativo: !data.ativo });
    };
    tbody.appendChild(tr);
  });
}

// ðŸ”¹ Listener em tempo real
db.collection('items').orderBy('created').onSnapshot(snapshot => {
  renderTable(snapshot.docs);
});
</script>
</body>
</html>
